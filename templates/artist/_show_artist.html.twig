{% extends 'base.html.twig' %}
{% block javascripts %}
	{{ parent() }}
	{{ encore_entry_script_tags('friend') }}
{% endblock %}
{% block title %}
	{% if artist.pseudo is not null %}
		{{ artist.pseudo }}
	{% elseif artist.firstname is not null %}
		{{ artist.firstname }}
	{% else %}
		{{ "Arts D'Eko" }}
	{% endif %}
{% endblock %}
{% block body %}
	<div class="container my-5">
		<h2 class="ml-3 card-title title-shadow font-medium text-uppercase">
			<span class="title-content">
				{% block head_title %}{% endblock %}
			</span>
		</h2>
		<div class="row col-12 mt-5 ml-2">
			<div class="row col-md-4 card border-0 bg-transparent">
				{% if artist.avatar.image %}
					<img class="img-fluid avatar-picture" src="/uploads/images/users/{{ artist.avatar.image }}" alt="image profil">
				{% else %}
					<img class="img-fluid avatar-picture" src="{{ asset('build/default-profile.png') }}">
				{% endif %}
				<div class"">
					{% block link_edit_profil %}{% endblock %}
				</div>
			</div>
			<div class="pt-3 col-md-8 card border-0 bg-transparent">
				<div>
					<h3 class="text-uppercase card-title title-shadow-grey font-medium color-{{ (artist.disciplines is empty) ? 'move' : artist.disciplines[0].color }}">
						<span class="title-content">
							<strong>{{ artist.firstname is null ? 'Prénom' : artist.firstname }}</strong>
							{{ (artist.lastname is null) ? 'Nom' : artist.lastname }}</span>
					</h3>
				</div>
				<div>
					<h4 class="title-shadow-grey font-regular text-uppercase color-{{ (artist.disciplines is empty) ? 'move' : artist.disciplines[0].color }}">
						<span class="title-content">{{ (artist.expertise is null) ? 'Spécialité' : artist.expertise }}</span>
					</h4>
				</div>
				<p class="font-regular">
					<i class="mt-3 fas fa-map-marker-alt icon icon-localisation color-{{ (artist.disciplines is empty) ? 'move' : artist.disciplines[0].color }}"></i>
					{% if artist.city is not null %}
						{{ (artist.city.zipcode is null) ? "Ville" : artist.city.name }}
					{% endif %}
				</p>
				<p class="font-regular">{{ (artist.description is null) ? 'Description du profil' : artist.description }}</p>
				{% block icon %}
					{% if app.user and app.user.id != artist.id  %}
						<p class="font-light">
							<a id="friend" href="{{ path('artist_add_friends', {friend_id: artist.id}) }}">
								<i class="{{ app.user.isFriend(artist) ? 'fas fa-heart' : 'far fa-heart' }} fa-2x mr-2 icon color-{{ (artist.disciplines is empty) ? 'move' : artist.disciplines[0].color }} icon-secondary"></i>
							</a>
						</p>
						<p id="text-friend">{{ app.user.isFriend(artist) ? 'Ajouté.e à mes contacts favoris !' : 'Ajouter à mes contacts favoris' }}</p>
					{% endif %}
				{% endblock %}

				<p class="ml-4">
					{% if artist.facebookUrl is not null %}
						<a href="#">
							<i class="fab fa-facebook fa-2x mr-2 icon color-{{ (artist.disciplines is empty) ? 'move' : artist.disciplines[0].color }} icon-secondary"></i>
						</a>
					{% endif %}
					{% if artist.instagramUrl is not null %}
						<a href="#">
							<i class="fab fab fa-instagram fa-2x ml-2 mr-2 icon color-{{ (artist.disciplines is empty) ? 'move' : artist.disciplines[0].color }} icon-secondary"></i>
						</a>
					</p>
				{% endif %}
			</div>
		</div>
		{% block message %}{% endblock %}
		{% block contacts %}
			{% if app.user %}
				{% if app.user.id == artist.id %}
					<div class="container py-5">
						<h2 class="mb-5 card-title title-shadow font-medium text-uppercase">
							<span class="title-content font-medium">Contacts</span>
						</h2>
						<div class="d-flex flex-column">
							<div class="container pt-5 d-flex flex-wrap">
								{% for friend in artist.friends %}
									<div class="img-wrap">
										<a href="{{ path('artist_show', {id: friend.id}) }}" target="_blank"><img src="/uploads/images/users/{{ friend.avatar.image }}" class="img-friend p-1"></a>
										<p class="img-description font-light">{{ friend.pseudo }}</p>
									</div>
								{% else %}
									<p>Pas de favoris pour le moment</p>
								{% endfor %}
							</div>
						</div>
					</div>
				{% endif %}
			{% endif %}
		{% endblock %}
		{% block artworks %}
			<div class="container">
				<div class="row col-12 mt-5">
					{% for artwork in artist.artworks %}
						{% if artwork.media.support == "photo" %}
							<div class="col-4">
								<h4 class="title-shadow-grey font-regular text-uppercase color-{{ artist.disciplines[0].color }}">
									<span class="title-content">{{ artwork.name }}</span>
								</h4>
								<img src="{{ artwork.media.url }}" alt="{{ artwork.name }}" width="100%">
							</div>
						{% elseif artwork.media.support == "video" %}
							<div class="col-12 col-md-6">
								<h4 class="title-shadow-grey font-regular text-uppercase color-{{ artist.disciplines[0].color }}">
									<span class="title-content">{{ artwork.name }}</span>
								</h4>
								<iframe class="mt-3 mb-5" width="100%" height="360" src="{{ artwork.media.url }}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
							</div>
						{% endif %}
					{% else %}
						<p class="font-regular">Pas de contenu pour l'instant
						</p>
					{% endfor %}
				</div>
				{% if not app.user is same as(artist) %}
					<div class="mt-3 container d-flex justify-content-end">
						<a href="{{ path('artist_contact', {user_id: artist.id}) }}" class="link-{{ (artist.disciplines is empty) ? 'move' : artist.disciplines[0].color }} font-light profil-link mt-1 profil-link-border-{{ (artist.disciplines is empty) ? 'move' : artist.disciplines[0].color }}">
							Contacter l'artiste</a>
					</div>
				{% endif %}
			</div>
		</div>
	{% endblock %}
	{% block search %}
		<div class="container">
			<h2 class="ml-3 mb-5 card-title title-shadow font-medium text-uppercase">
				<span class="title-content">Recherche</span>
			</h2>
		</div>
	{% endblock %}
	{% block announcements %}
		<div class="container">
			<div class="row col-12 mt-5">
				<h2 class="ml-3 mb-5 card-title title-shadow text-uppercase">
					<span class="title-content font-medium">Les annonces</span>
				</h2>
			</div>
			<div class="row">
				{% for announcement in artist.announcements %}
					<div class="col-sm-4 d-flex justify-content-center">
						<div class="card card-announcement card-{{ announcement.discipline.color }} bg-light mb-5" style="width: 18rem;">
							<div class="card-body">
								<h5 class="card-title text-uppercase font-weight-bold">{{ announcement.title }}</h5>
								<h6 class="card-subtitle mb-2 text-muted">Catégorie : {{ announcement.discipline.name }}</h6>
								{% if announcement.date is not null %}
									<h6 class="card-subtitle mb-2 text-muted">{{ announcement.date|date('d/m/Y') }}</h6>
								{% endif %}
								<p class="card-text text-justify">{{ announcement.content }}</p>
								<p class="text-uppercase text-right"><a href="{{ path('artist_contact', {user_id: announcement.user.id}) }}" class="font-weight-bold text-dark card-link"><i class="far fa-envelope"></i> Contacter</a></p>
							</div>
						</div>
					</div>
				{% endfor %}
			</div>

		</div>
	{% endblock %}
{% endblock %}
